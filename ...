PCFG ì§ˆë¬¸ë“¤

=======
Controller êµ¬í˜„ ê³¼ì •

* CW registerë¥¼ ë‚´ë¶€ì— ì •ì˜
* signalë¡œ s_CW_reg_data, s_CW_reg_data_out, 3ê°€ì§€ ëª¨ë“œë¥¼ ì„¤ì •í•´ë‘ 
* reset ìš°ì„ ìˆœìœ„

ëª¨ë“œ ì»¨íŠ¸ë¡¤

* address decoder, 8254, controller (PC, DA...)
* DA_idleì—ì„œ PCë¡œ ë„˜ì–´ê°€ëŠ” ë¶€ë¶„
  - startê°€ 1ì¼ ë•Œ activeë¡œ ë„˜ì–´ê°€ëŠ” ê²ƒì„ ìš°ì„ 
  - startê°€ 0ì´ê³  x20ì¼ ë•Œ DA_idle ìœ ì§€
  - (start 0) ì´ê³  x40, x80 ë“± ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ 
* signal (s_CW_reg_data_out, DA_start_addr, DA_stop_addr)
*** ëª¨ë¥´ê² ëŠ” ë¶€ë¶„ ğŸ˜®ğŸ˜® ì´ë ‡ê²Œ ë™ì‘í•˜ë ¤ë©´ reg_data_out ê°’ì´ ì¤‘ê°„ì— ëœ¨ë©´ ì•ˆë˜ê³  ìœ ì§€ë˜ì–´ì•¼ í•˜ëŠ”ë° ë°©ë²•ì´...ğŸ˜®
=======
* Bidirectional Buffer ê´€ë ¨ + ì§ˆë¬¸ ê³µìœ 
* ì¼ì •: ì›” 3ì‹œ, ìˆ˜ 4ì‹œë°˜, ... (ì£¼ë§ ì „ê¹Œì§€ëŠ”.....)
* ì—­í•  ë¶„ë‹´: (ê°€ê¸‰ì ì´ë©´ í¬íŠ¸ë§¤í•‘ ì´ì•¼ê¸°ë¥¼ ì˜¤ëŠ˜ ë‹¤ í•˜ê³ , ìˆ˜ìš”ì¼ê¹Œì§€ ë§¤í•‘í•œê±¸ ê³µìœ ....)
* ë””ë²„ê¹… ì¼ì •
=======

[controller]
- CW registerë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ë¶€ì— êµ¬í˜„í•˜ê³  port mapping (enable ì‹ í˜¸ X)
1) reg_clk : system clockì— ì—°ê²° (resetë„ ë§ˆì°¬ê°€ì§€ë¡œ ì„¤ì •)
2) reg_data_in : CW_addr =1 ì¸ ê²½ìš°ì—ë§Œ reg_data_inì´(signal) reg_data_out(signal)ìœ¼ë¡œ ë„˜ì–´ê°€ë„ë¡ ì„¤ì •
(+ CW_addr = 0ì¼ ë•Œì˜ ë™ì‘ì€? ğŸ˜®
 + reg_clkì„ ì¡°ì ˆí•´ì£¼ëŠ” ë°©í–¥ìœ¼ë¡œ í•œë‹¤ë©´ CW_addr and m_sys_clkìœ¼ë¡œ ì„¤ì •??) ğŸ˜®
3) reg_data_out(signal)ì€ ëª¨ë“œ ì»¨íŠ¸ë¡¤ ì‹œ state machine ë³€í™˜í•˜ëŠ” ì¡°ê±´ìœ¼ë¡œë§Œ ì‚¬ìš©

- mode control ë¶€ë¶„
0) 8bit registerğŸ˜®ğŸ˜® 
1) start ì‹ í˜¸ğŸ˜®ë¥¼ DA_start_addrê°€ 1ì¼ ë•Œ, stopì´ 1ì¼ ë•Œë¡œ state machine ì…ë ¥ ì‹ í˜¸ë¥¼ ì¸ê°€
* 2) da_idleì—ì„œ cw5 ì¼ ë•Œë¥¼ ì •ì˜í•œë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?
* 3) data_int_inì—ì„œ CW_registerì— ë“¤ì–´ê°€ëŠ” ê°’ì„ ì£¼ëŠ” ê²ƒì´ë¼ê³  ìƒê°í–ˆëŠ”ë° PC UIì—ì„œ ì „ë‹¬í•´ì£¼ëŠ” ê°’ì¸ì§€ğŸ˜®, ì•„ë‹ˆë©´ ë”°ë¡œ signal cw7,6,5 ì •ì˜?
cw4~cw0ì— ëŒ€í•œ ì„ ì–¸ ì—¬ë¶€)
(ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ê°’ë“¤ì´ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì „ë‹¬ë˜ëŠ”ì§€ ì—¬ë¶€)



==============================================================================================================================

- in, out í•€ ì—°ê²°
1) 8254_rpê°€ dac_clkì´ë¼ë©´, 8254ì—ì„œ ì§ì ‘ ì—°ê²°í•˜ì§€ ì•Šê³  dAC out registerì— controllerë¥¼ í†µí•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ? ğŸ˜®
(DA modeì¼ë•Œë§Œ ì¸ê°€í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì¼ê¹Œ? - ì¼ë‹¨ì€... 


[PCFG top]
-8254 ì—°ê²°í•  ë•Œ m_wr_bì˜ ì—­í• ì€? DA ëª¨ë“œì¼ ë•Œë§Œ ë°›ì•„ë“¤ì¸ë‹¤ê³  í•´ì•¼ í• ê¹Œ? not(s_db_en_b)ìœ¼ë¡œ ì„¤ì •í•´ë‘ì—ˆë‹¤ \ğŸ˜®
-IBUF, BUFGì˜ ì¡´ì¬ ì´ìœ  ( BUFG -> IBUF )ë¡œ ì‹œìŠ¤í…œ í´ëŸ­ì„ 1clk ì§€ì—°??...
-address counterì—ì„œ output signal í• ë‹¹í•˜ê¸°
- ëˆ„ë½ëœ out?



[SRAM]
-block ram component & port mapping ì„¤ì •í•˜ê¸°(ëª» ê±´ë“œë¦¬ëŠ” ì¤‘)
- addra, addrbë¡œ ë‚˜ëˆ ì„œ ì„¤ì •í•œ ì´ìœ ì™€ ê°ê°ì˜ ì—­í• 



[address decoder] ğŸ˜®ğŸ˜®ğŸ˜®
- m_pc_addr_valid ê°’ì„ process ë¬¸ì˜ ì…ë ¥ìœ¼ë¡œ ë‘ê³  address decoderë¥¼ ì„¤ì •í•œë‹¤ê³  ì ‘ê·¼í–ˆë‹¤.
(ì¡°ê±´ì„ ë”°ë¡œ ì„¤ì •í•´ì¤˜ì•¼ í•˜ëŠ”ì§€/ processë¬¸ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ì ‘ê·¼ë²•ë„ ê°€ëŠ¥í•œì§€)




[bidirectional buffer] *** (êµ¬í˜„ì„ ì œëŒ€ë¡œ í–ˆëŠ”ì§€!)
- dir ì„ read enableë¡œ ì„¤ì •í•˜ë©´, 1ì¼ ë•Œ readê°€ ëœë‹¤.
- pcì—ì„œ ì¶©ëŒì´ ì¼ì–´ë‚˜ëŠ”ê±´ì§€, ì•„ë‹ˆë©´ daëª¨ë“œì—ì„œ pcë¡œ ë„˜ì–´ê°€ëŠ” ìƒí™©/ ë°ì´í„°ë¥¼ ì½ì–´ë“¤ì´ëŠ” ê³¼ì •ì—ì„œ bufferê°€ í•„ìš”í•œê±¸ê¹Œ?
- ì¶©ëŒì´ ì¼ì–´ë‚œë‹¤ë©´ ë¨¼ì € ë°›ì•„ì•¼ í•  ê°’ì€ ë­˜ê¹Œ?
- dir, oe_b ì‹ í˜¸ì— ëŒ€í•œ ì •ì˜ **
- m_pc_rd_enì„ í™œìš©í•´ì„œ dir ì‹ í˜¸ë¥¼ ì •ì˜í•œë‹¤?




[address counter]
- 16bit ì¹´ìš´í„°(ë„‰ë„‰í•˜ê²Œ ë¹„íŠ¸ ì„¤ì •ì„ í–ˆë‹¤?)
- ì¹´ìš´í„°ì— ë¦¬ì…‹ ì‹ í˜¸ëŠ” í•„ìš”ì—†ì„ê¹Œ?_?


* pcì—ì„œ ì£¼ëŠ” wen, renì„ ëª¨ë‘ active highë¡œ ì„¤ì •
  data_int_in: in std_logic_vector(7 downto 0); 
  
  -- system input clk/reset
  m_sys_clk: in std_logic; -- controller / block memory clock
  m_sys_reset_b: in std_logic;
  
  -- Address decoder
  CW_addr: in std_logic;
  mem_addr: in std_logic;
  xclr_addr: in std_logic;
  DA_start_addr: in std_logic;
  DA_stop_addr: in std_logic;
  
  -- r/w enable (pc)
  ren: in std_logic;
  wen: in std_logic;
  
  -- 8254 in/out
  i8254_ick: in  std_logic;
  i8254_rp: in std_logic;
  
  dac_clk: out std_logic; --- address counter clock / DAC out register input
  
  -- address counter
  addr_cnt_clk: out std_logic;
  addr_cnt_clr: out std_logic;
  addr_cnt_en: out std_logic;
  
  -- block memory 
  mem_cs: out std_logic;
  mem_wen: out std_logic;
  mem_ren: out std_logic
 
top module in ì‹ í˜¸ë“¤

ì›½ì—ì—‘
--------------------------
